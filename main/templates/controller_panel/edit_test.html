<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Testni tahrirlash</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<body style="background: url('/static/main/1.png') no-repeat center center fixed; background-size: cover; min-height: 100vh; font-family: 'Inter', 'Segoe UI', sans-serif;">
<div class="container d-flex align-items-center justify-content-center" style="min-height: 100vh;">
    <div class="card shadow-lg p-4" style="max-width: 500px; width: 100%; border-radius: 24px; background: rgba(255,255,255,0.85); backdrop-filter: blur(12px);">
        <h2 class="mb-4 text-center" style="font-weight:700; color:#4f46e5;">Testni tahrirlash</h2>
        {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endif %}
        <form method="post">
            {% csrf_token %}
            {% if test.group %}
            <div class="mb-3">
                <label for="group" class="form-label">Guruh:</label>
                <select name="group" id="group" class="form-select" required>
                    {% for group in groups %}
                        <option value="{{ group.id }}" {% if test.group.id == group.id %}selected{% endif %}>{{ group.name }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endif %}
            {% if test.kafedra %}
            <div class="mb-3">
                <label for="kafedra" class="form-label">Kafedra:</label>
                <select name="kafedra" id="kafedra" class="form-select" required>
                    {% for kafedra in kafedralar %}
                        <option value="{{ kafedra.id }}" {% if test.kafedra.id == kafedra.id %}selected{% endif %}>{{ kafedra.name }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endif %}
            {% if test.bulim %}
            <div class="mb-3">
                <label for="bulim" class="form-label">Bo'lim:</label>
                <select name="bulim" id="bulim" class="form-select" required>
                    {% for bulim in bulimlar %}
                        <option value="{{ bulim.id }}" {% if test.bulim.id == bulim.id %}selected{% endif %}>{{ bulim.name }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endif %}
            <div class="mb-3">
                <label for="subject" class="form-label">Fan:</label>
                <select name="subject" id="subject" class="form-select" required>
                    {% for subject in subjects %}
                        <option value="{{ subject.id }}" {% if test.subject.id == subject.id %}selected{% endif %}>{{ subject.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-3">
                <label for="question_count" class="form-label">Savollar soni:</label>
                <input type="number" name="question_count" id="question_count" class="form-control" value="{{ test.question_count }}" required>
            </div>
            <div class="mb-3">
                <label for="total_score" class="form-label">Umumiy ball:</label>
                <input type="number" name="total_score" id="total_score" class="form-control" value="{{ test.total_score }}" required>
            </div>
            <div class="mb-3">
                <label for="duration" class="form-label">Test muddati (soat:daqiq:soniya):</label>
                <input type="text" name="duration" id="duration" class="form-control" value="{{ test.duration|time:'H:i:s' }}" required>
            </div>
            <div class="d-flex justify-content-between align-items-center mt-4">
                <button type="submit" class="btn btn-primary px-4 py-2" style="font-weight:600; border-radius:10px;">Saqlash</button>
                <a href="/api/controller-panel/dashboard/" class="btn btn-outline-secondary px-4 py-2" style="border-radius:10px;">Bekor qilish</a>
            </div>
        </form>
    </div>
</div>
</body>
</html>
